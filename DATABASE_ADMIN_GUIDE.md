# دليل المدير - إدارة قاعدة البيانات

## نظرة عامة
هذا الدليل مخصص للمدير الرئيسي فقط لإدارة وتغيير إعدادات قاعدة البيانات PostgreSQL.

## الوصول إلى الميزة
- تسجيل الدخول باستخدام: **admin/admin**
- الانتقال إلى لوحة المدير
- البحث عن قسم "إعدادات قاعدة البيانات" (أحمر اللون)

## تغيير قاعدة البيانات

### الخطوات:
1. **مراجعة قاعدة البيانات الحالية**
   - ستظهر لك قاعدة البيانات الحالية (مخفية جزئياً للأمان)
   
2. **إدخال الرابط الجديد**
   - تنسيق الرابط: `postgresql://username:password@host:port/database`
   - مثال: `postgresql://user123:pass456@db.example.com:5432/hospital_db`

3. **التحديث**
   - اضغط على "تحديث قاعدة البيانات"
   - سيتم تحديث ملف البيئة (.env) تلقائياً
   - سيعاد تشغيل النظام خلال 3 ثوانٍ

## أمثلة قواعد البيانات المدعومة

### Neon Database
```
postgresql://username:password@ep-example-123456.region.aws.neon.tech/database_name
```

### Railway
```
postgresql://postgres:password@containers-region.railway.app:5432/railway
```

### Supabase
```
postgresql://postgres:password@db.project.supabase.co:5432/postgres
```

### قاعدة بيانات محلية
```
postgresql://postgres:password@localhost:5432/medical_equipment
```

## احتياطات الأمان

### قبل التحديث:
- ✅ تأكد من صحة رابط قاعدة البيانات
- ✅ احتفظ بنسخة احتياطية من الرابط الحالي
- ✅ تأكد من أن قاعدة البيانات الجديدة تحتوي على الجداول المطلوبة

### بعد التحديث:
- ✅ تحقق من عمل النظام بشكل صحيح
- ✅ اختبر تسجيل الدخول والوظائف الأساسية
- ✅ تحقق من البيانات والتقارير

## استكشاف الأخطاء

### خطأ "Invalid PostgreSQL URL format"
- تأكد من أن الرابط يبدأ بـ `postgresql://`
- تحقق من تنسيق الرابط الصحيح

### خطأ الاتصال بقاعدة البيانات
- تحقق من أن قاعدة البيانات متاحة ومتصلة
- تأكد من صحة اسم المستخدم وكلمة المرور
- تحقق من عنوان الخادم ورقم المنفذ

### فقدان البيانات
- إذا لم تظهر البيانات، قد تحتاج إلى تشغيل:
  ```bash
  npm run db:push
  ```
- أو استيراد البيانات من نسخة احتياطية

## الملفات المتأثرة
عند تحديث قاعدة البيانات، يتم تحديث:
- ملف `.env` في جذر المشروع
- متغير البيئة `DATABASE_URL`
- اتصال قاعدة البيانات في التطبيق

## الدعم الفني
للمساعدة التقنية، راجع:
- ملف `replit.md` للتفاصيل التقنية
- ملف `README_SETUP.md` لإعداد النظام
- ملف `shared/schema.ts` لهيكل قاعدة البيانات

---
**تحذير**: هذه الميزة متاحة للمدير الرئيسي فقط ويجب استخدامها بحذر لتجنب فقدان البيانات.